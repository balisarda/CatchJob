<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.care.CatchJob.IDAO.MemberDao">
	<select id="loginProc" resultType="int" parameterType="com.care.CatchJob.DTO.Member">
		SELECT
		COUNT(*) FROM MEMBER WHERE MEMBER_NICKNAME=#{nickname} AND
		MEMBER_PW=#{pw}
	</select>
	<select id="chkNickname" resultType="int">
		SELECT COUNT(*) FROM MEMBER
		WHERE MEMBER_NICKNAME=#{nickname}
	</select>
	<insert id="memberProc" parameterType="com.care.CatchJob.DTO.Member">
		INSERT INTO
		MEMBER(MEMBER_IDX, MEMBER_NAME, MEMBER_NICKNAME, MEMBER_PW,
		MEMBER_AGE, MEMBER_GENDER, MEMBER_EMAIL, MEMBER_PHONE)
		VALUES((SELECT
		NVL(MAX(MEMBER_IDX), 0)+1 FROM MEMBER), #{name}, #{nickname}, #{pw},
		#{age}, #{gender}, #{email}, #{phone})
	</insert>
	<select id="findIdInfo" parameterType="com.care.CatchJob.DTO.Member"
		resultType="String">
		SELECT MEMBER_NICKNAME FROM MEMBER WHERE
		MEMBER_NAME=#{name} AND MEMBER_EMAIL=#{email}
	</select>
	<select id="findPw" parameterType="com.care.CatchJob.DTO.Member"
		resultType="int">
		SELECT COUNT(*) FROM MEMBER WHERE MEMBER_NICKNAME=#{nickname} AND MEMBER_EMAIL=#{email}
	</select>
	<update id="findPwInfo" parameterType="map">
		UPDATE MEMBER SET MEMBER_PW=#{pw} WHERE MEMBER_NICKNAME=#{nickname} AND MEMBER_EMAIL=#{email}
	</update>
</mapper>